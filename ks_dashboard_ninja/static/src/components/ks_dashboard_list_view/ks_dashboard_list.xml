<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <t t-name="ks_dashboard_ninja.Ksdashboardlistview">

        <div class="grid-stack-item ks_tile_carousel ks_dashboarditem_id" t-att-id="item_id" t-ref="ks_list_view">
            <div class="grid-stack-item-content ks_list_view_container ks_dashboarditem_chart_container ks_dashboard_item_hover card border-0"
                 t-att-title="ks_info" t-att-id="item_id">

                <t t-if="!env.isExplainDashboardWithAi">
                    <div class="p-3 py-3 d-flex flex-row align-items-center justify-content-between">
                    <div class="d-flex align-items-center w-50">
                        <h6 class="m-0 font-weight-bold h3 mr-3 ks_list_view_heading text-capitalize text-start " t-att-title="ks_chart_title">
                            <t t-esc="ks_chart_title"/>
                        </h6>
                        <t t-if="ks_breadcrumb.length >= 1">
                            <nav class="ks_breadcrumb">
                            <ul>
                                <li class="d-none" t-att-id="'item'+'_'+'-1'">
                                       <span t-att-data-sequence = '-1' t-att-data-item-id="item_id" t-on-click="ksOnDrillUp">
                                           <t t-esc="ks_chart_title"/>
                                       </span>
                                </li>
                                <t t-foreach="ks_breadcrumb" t-as="chart_breadcrumb" t-key="chart_breadcrumb_index">
                                        <li class="d-none" t-att-id="chart_breadcrumb['name'] + '_' + chart_breadcrumb_index">
                                        <span t-att-data-sequence="chart_breadcrumb_index" t-att-data-item-id="item_id" t-on-click="ksOnDrillUp">
                                           <t t-esc="chart_breadcrumb['name']"/>
                                        </span>
                                    </li>
                                </t>
                            </ul>
                            </nav>
                        </t>
                    </div>
<!--                    for ai dashboard-->
                    <img src="/ks_dashboard_ninja/static/images/selected.svg" class="ks_img_display d-none" width="30"/>
                    <div class="select-btn d-none">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M10.0001 18.3332C14.5834 18.3332 18.3334 14.5832 18.3334 9.99984C18.3334 5.4165 14.5834 1.6665 10.0001 1.6665C5.41675 1.6665 1.66675 5.4165 1.66675 9.99984C1.66675 14.5832 5.41675 18.3332 10.0001 18.3332Z"
                                stroke="" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                            <path d="M6.45825 9.99993L8.81659 12.3583L13.5416 7.6416" stroke="" stroke-width="1.5"
                                stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </div>
<!--                    -->
                    <KsItemButton item_data="this.item" itemRootRef="ks_list_view"/>
                    <t t-if="ksIsDashboardManager and props.hideButtons">
                    </t>
                </div>
                </t>

                <t t-if="ks_ai_analysis">
                    <div class="explain-ai pt-3">
                        <div class="container">
                            <div class="row ks_ai_explain_body">
                                 <div class="col-xl-6 col-12">
                                     <div class="charts-sec">
                                         <h6 class="m-0 font-weight-bold h3 mr-3 ks_list_view_heading text-capitalize text-start text-black" t-att-title="ks_chart_title">
                                            <t t-esc="ks_chart_title"/>
                                         </h6>
                                         <div name="ks_list_div" class="card-body table-responsive ks_list_card_body ks_list_item_table ks_list_explain">
                                            <t t-call="ks_dashboard_ninja.ks_list_view_table"/>
                                         </div>
                                         <div class="d-flex justify-content-end">
                                            <div class="ks_pager_name">
                                                <t t-if="ks_pager" t-call="ks_pager_template"/>
                                            </div>
                                         </div>
                                     </div>
                                 </div>
                                <div class="col-xl-6 col-12">
                                    <div class="charts-data h-100">
                                        <div class="charts-content-box">
<!--                                            <div class="ks_ai_explanation">-->
                                                <p><t t-esc="ks_ai_analysis_1"/></p>
                                                <p><t t-esc="ks_ai_analysis_2"/></p>
<!--                                            </div>-->
                                        </div>

                                        <div class="voice-button" t-on-click="props.ks_speak" title="Text to speech">
                                            <div class="voice-cricle">
                                                <img src="/ks_dashboard_ninja/static/images/voice-cricle.svg" height="24" width="24" alt="voice-img" loading="lazy"
                                                class="img-fluid"/>
                                            </div>
                                            <div class="comp-gif d-none">
                                                <img src="/ks_dashboard_ninja/static/images/Comp.gif" alt="loading gif" height="24" width="24"
                                                     class="img-fluid"/>
                                            </div>
<!--                                        <span class="fa fa-volume-up"/>-->
                                            <audio t-ref="aiAudioRef"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </t>
                <t t-else="">
                    <div name="ks_list_div" class="card-body table-responsive ks_list_item_table">
                        <t t-call="ks_dashboard_ninja.ks_list_view_table"/>
                    </div>
                    <div class="d-flex justify-content-end">
                        <div class="ks_pager_name">
                            <t t-if="ks_pager" t-call="ks_pager_template"/>
                        </div>
                    </div>
                </t>
            </div>
        </div>
    </t>

    <t t-name="ks_dashboard_ninja.ks_list_view_tmpl">
        <t t-foreach="state.list_view_data['data_rows']" t-as="table_row" t-key="table_row_index">
            <tr class="ks_tr" t-att-data-record-id="table_row['id']" t-att-data-domain="table_row['domain']"
                t-att-data-item-Id="item_id"
                t-att-data-sequence="table_row['sequence']" t-att-data-last_seq="table_row['last_seq']">
                <t t-set="ks_rec_count" t-value="0"/>
                <t t-foreach="table_row['data']" t-as="row_data" t-key="row_data_index">
                    <t t-if="table_row['ks_column_type'][ks_rec_count]=='html'">
                        <td class="ks_list_canvas_click">
                            <t t-out="markup(row_data)"/>
                        </td>
                        <t t-set="ks_rec_count" t-value="ks_rec_count+1"/>
                    </t>
                    <!-- TODO: No need of multiple if else , can be deduced to logic without if else , nedd to change the flow for this -->
                    <t t-elif="['many2one', 'selection'].includes(state.list_view_data['fields_type'][ks_rec_count])">
                        <td class="ks_list_canvas_click cursor-pointer"
                            t-on-click="(ev) => this.onChartCanvasClick(ev, row_data_index, row_data, state.list_view_data['fields_type'][ks_rec_count] )">
                            <t t-out="row_data ? row_data[1] : ''"/>
                        </td>
                        <t t-set="ks_rec_count" t-value="ks_rec_count+1"/>
                    </t>
                    <t t-elif="table_row['ks_column_type'][ks_rec_count] == 'boolean'">
                        <td class="ks_list_canvas_click" t-on-click="onChartCanvasClick">
                            <t t-out="row_data"/>
                        </td>
                        <t t-set="ks_rec_count" t-value="ks_rec_count+1"/>
                    </t>
                    <t t-else="">
                        <td class="ks_list_canvas_click" t-on-click="onChartCanvasClick">
                            <t t-esc="row_data !== false ? row_data : ''"/>
                        </td>
                        <t t-set="ks_rec_count" t-value="ks_rec_count+1"/>
                    </t>
                </t>
                <td class="ks_info">
                    <t t-if="ks_show_records">
                    <div id="ks_item_info" t-att-data-model="state.list_view_data['model']"
                       t-att-data-list-type="state.list_view_data['list_view_type']"
                       t-att-data-groupby="state.list_view_data['groupby']"
                       t-att-data-record-id="table_row['id']" t-att-data-item-id="item_id"
                       t-att-data-list-view-type="tmpl_list_type"
                       t-att-data-domain="table_row['domain']"
                       t-on-click="ksOnListItemInfoClick">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 20 20" fill="none">
                            <path d="M9.16675 1.66663H7.50008C3.33341 1.66663 1.66675 3.33329 1.66675 7.49996V12.5C1.66675 16.6666 3.33341 18.3333 7.50008 18.3333H12.5001C16.6667 18.3333 18.3334 16.6666 18.3334 12.5V10.8333" stroke="#241C1D" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M13.3666 2.51663L6.7999 9.0833C6.5499 9.3333 6.2999 9.82497 6.2499 10.1833L5.89157 12.6916C5.75823 13.6 6.3999 14.2333 7.30823 14.1083L9.81657 13.75C10.1666 13.7 10.6582 13.45 10.9166 13.2L17.4832 6.6333C18.6166 5.49997 19.1499 4.1833 17.4832 2.51663C15.8166 0.849966 14.4999 1.3833 13.3666 2.51663Z" stroke="#241C1D" stroke-width="1.25" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M12.425 3.45837C12.9834 5.45004 14.5417 7.00837 16.5417 7.57504" stroke="#241C1D" stroke-width="1.25" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    </t>
                </td>
            </tr>
        </t>
    </t>

    <t t-name="ks_dashboard_ninja.ks_list_view_table">
        <t t-if="state.list_view_data &amp;&amp; state.list_view_data.label &amp;&amp; state.list_view_data.label.length">
            <table id="ksListViewTable" class="table table-hover ks_list_view_layout_1"
                   t-att-data-model="state.list_view_data['model']">
                <thead>
                    <t t-call="ks_list_view_header"/>
                </thead>
                <tbody class="ks_table_body">
                    <t t-call="ks_dashboard_ninja.ks_list_view_tmpl"/>
                </tbody>
            </table>
        </t>
        <t t-else="">
            <div class="d-flex justify-content-center align-items-center h-100">
                No Data Present
            </div>
        </t>
    </t>
    <t t-name="ks_list_view_header">
        <tr>
            <t t-foreach="state.list_view_data['label']" t-as="table_header" t-key="table_header_index">
                <th>
                    <t t-esc="table_header"/>
                </th>
            </t>
            <th/>
        </tr>
    </t>
    <div t-name="ks_pager_template" class="ks_pager">
        <span class="ks_counter">
            <span class="ks_value">
                <t t-esc="count"/>
            </span>
        </span>
        <span class="btn-group" aria-atomic="true" t-att-data-next_offset="intial_count"
              t-att-data-prev-offset="offset">
            <button type="button"
                    class="fa fa-chevron-left btn  ks_load_previous ks_event_offer_list"
                    t-att-data-item-id="item_id" title="Previous" t-on-click="ksLoadPreviousRecords"/>
            <button type="button" class="fa fa-chevron-right btn  ks_load_next"
                    t-att-data-item-id="item_id" title="Next" t-on-click="ksLoadMoreRecords"/>
        </span>
    </div>

</templates>